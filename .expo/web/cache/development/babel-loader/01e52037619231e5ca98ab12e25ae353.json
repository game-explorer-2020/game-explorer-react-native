{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNavigation = require(\"react-navigation\");\n\nvar _reactNative = require(\"react-native\");\n\nvar _Style = _interopRequireDefault(require(\"../styles/Style\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _api = _interopRequireDefault(require(\"../services/api\"));\n\nvar _Favorite = _interopRequireDefault(require(\"../components/Favorite\"));\n\nvar _jsxFileName = \"C:\\\\Users\\\\Jonathan\\\\Game Explorer React Native\\\\src\\\\screens\\\\NewsFeed.js\";\n\nfunction NewsFeed(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation;\n\n  var _useState = (0, _react.useState)([]),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      feeds = _useState2[0],\n      setFeeds = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(0),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      currentPage = _useState4[0],\n      setCurrentPage = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  (0, _react.useEffect)(function () {\n    loadFeeds();\n  }, []);\n\n  loadFeeds = function loadFeeds() {\n    var response;\n    return _regenerator.default.async(function loadFeeds$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!loading) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            setLoading(true);\n            _context.next = 5;\n            return _regenerator.default.awrap(_api.default.get('feeds?page=' + currentPage));\n\n          case 5:\n            response = _context.sent;\n            setTimeout(function () {\n              setFeeds([].concat((0, _toConsumableArray2.default)(feeds), (0, _toConsumableArray2.default)(response.data)));\n              setLoading(false);\n            }, 100);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  function handleNavigate(item) {\n    navigation.navigate('WebViewNews', {\n      url: item.url\n    });\n  }\n\n  function getDate(param) {\n    return (0, _moment.default)(new Date(param.date * 1000), \"YYYYMMDD\").fromNow();\n  }\n\n  function handleLoadMore() {\n    return _regenerator.default.async(function handleLoadMore$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!loading) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 2:\n            _context2.next = 4;\n            return _regenerator.default.awrap(setCurrentPage(currentPage + 1));\n\n          case 4:\n            loadFeeds();\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  ;\n\n  function renderFooter() {\n    if (!loading) return null;\n    return _react.default.createElement(_reactNative.SafeAreaView, {\n      style: [styles.centerLoading],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }\n    }, _react.default.createElement(_reactNative.ActivityIndicator, {\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }));\n  }\n\n  ;\n  return _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_reactNative.FlatList, {\n    data: feeds,\n    keyExtractor: function keyExtractor(item, index) {\n      return index.toString();\n    },\n    vertical: true,\n    showsHorizontalScrollIndicator: true,\n    onEndReached: handleLoadMore,\n    onEndThreshold: 0.1,\n    contentContainerStyle: {\n      flexGrow: 1\n    },\n    ListFooterComponent: renderFooter,\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return _react.default.createElement(_reactNative.SafeAreaView, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }\n      }, _react.default.createElement(_reactNative.TouchableOpacity, {\n        onPress: function onPress() {\n          return handleNavigate(item);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }\n      }, _react.default.createElement(_reactNative.Image, {\n        source: {\n          uri: item.imageUrl\n        },\n        style: styles.frame,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }\n      })), _react.default.createElement(_reactNative.Text, {\n        style: [_Style.default.fontP, global.fontColor, styles.newsText],\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }\n      }, item.title), _react.default.createElement(_reactNative.SafeAreaView, {\n        style: styles.Row,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }\n      }, _react.default.createElement(_Favorite.default, {\n        content: item,\n        size: 14,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 29\n        }\n      }), _react.default.createElement(_reactNative.Text, {\n        style: [_Style.default.fontP, styles.timeStamp],\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 29\n        }\n      }, getDate({\n        date: item.publishedAt\n      }))));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }));\n}\n\nvar styles = _reactNative.StyleSheet.create({\n  Row: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"flex-start\",\n    marginTop: 5,\n    marginBottom: 15\n  },\n  frame: {\n    marginTop: 8,\n    height: 175,\n    width: '100%',\n    borderRadius: 10\n  },\n  newsText: {\n    paddingTop: 5,\n    paddingBottom: 3,\n    alignItems: 'flex-start'\n  },\n  timeStamp: {\n    alignItems: 'flex-end',\n    fontSize: 15,\n    color: '#494949',\n    letterSpacing: 0.15\n  },\n  centerLoading: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    position: 'absolute',\n    bottom: 10,\n    left: 10,\n    right: 10,\n    zIndex: 10\n  }\n});\n\nvar _default = (0, _reactNavigation.withNavigation)(NewsFeed);\n\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/Jonathan/Game Explorer React Native/src/screens/NewsFeed.js"],"names":["NewsFeed","navigation","feeds","setFeeds","currentPage","setCurrentPage","loading","setLoading","loadFeeds","api","get","response","setTimeout","data","handleNavigate","item","navigate","url","getDate","param","Date","date","fromNow","handleLoadMore","renderFooter","styles","centerLoading","index","toString","flexGrow","uri","imageUrl","frame","Style","fontP","global","fontColor","newsText","title","Row","timeStamp","publishedAt","StyleSheet","create","flexDirection","justifyContent","alignItems","marginTop","marginBottom","height","width","borderRadius","paddingTop","paddingBottom","fontSize","color","letterSpacing","flex","position","bottom","left","right","zIndex"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { withNavigation } from 'react-navigation';\r\nimport { SafeAreaView, StyleSheet, Text, FlatList, Image, TouchableOpacity, ActivityIndicator } from 'react-native';\r\nimport Style from '../styles/Style'\r\nimport moment from 'moment';\r\nimport api from '../services/api';\r\nimport Favorite from '../components/Favorite'\r\n\r\nfunction NewsFeed ({ navigation }) {\r\n\r\n    const [feeds, setFeeds] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(0);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadFeeds();\r\n    }, []);\r\n\r\n    loadFeeds = async () => {\r\n        if(loading) return;\r\n        setLoading(true)\r\n        const response = await api.get('feeds?page='+currentPage);\r\n        setTimeout(() => {\r\n            setFeeds([...feeds, ...response.data]);\r\n            setLoading(false);\r\n        }, 100)\r\n    } \r\n\r\n    function handleNavigate( item ) {\r\n        navigation.navigate('WebViewNews', { url : item.url });\r\n    }\r\n  \r\n    function getDate (param) {\r\n        return moment(new Date(param.date * 1000), \"YYYYMMDD\").fromNow();\r\n    }\r\n         \r\n    async function handleLoadMore () {\r\n        if(loading) return;\r\n        await setCurrentPage(currentPage + 1);\r\n        loadFeeds();\r\n    };\r\n\r\n    function renderFooter() {\r\n        if (!loading) return null;\r\n        return (\r\n        <SafeAreaView style={[styles.centerLoading]}>\r\n            <ActivityIndicator size=\"large\"/>\r\n        </SafeAreaView>\r\n        );\r\n    };\r\n\r\n    return (           \r\n        <>\r\n            <FlatList\r\n                data={feeds}\r\n                keyExtractor={(item,index) => index.toString()}\r\n                vertical\r\n                showsHorizontalScrollIndicator={true}\r\n                onEndReached={handleLoadMore}\r\n                onEndThreshold={0.1}    \r\n                contentContainerStyle={{ flexGrow: 1 }}\r\n                ListFooterComponent={renderFooter}\r\n                renderItem={({ item }) => (\r\n                <SafeAreaView>\r\n                    <TouchableOpacity onPress={() => handleNavigate(item)}>\r\n                        <Image source={{uri: item.imageUrl}} style={styles.frame}></Image>\r\n                    </TouchableOpacity>\r\n                        <Text style={[Style.fontP, global.fontColor, styles.newsText]}>{item.title}</Text>\r\n                        <SafeAreaView style={styles.Row}>\r\n                            <Favorite content={item} size={14}/>  \r\n                            <Text style={[Style.fontP, styles.timeStamp]}>\r\n                                {getDate({date: item.publishedAt})}\r\n                            </Text>\r\n                        </SafeAreaView>\r\n                </SafeAreaView>\r\n                )}\r\n            />\r\n        </>\r\n    )\r\n }\r\n    \r\nconst styles = StyleSheet.create({\r\n    Row: {\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"flex-start\",\r\n        marginTop: 5,\r\n        marginBottom: 15\r\n    },\r\n    frame: {\r\n        marginTop: 8,\r\n        height: 175,\r\n        width: '100%',\r\n        borderRadius: 10\r\n    },\r\n    newsText: {\r\n        paddingTop: 5,\r\n        paddingBottom: 3,\r\n        alignItems: 'flex-start',\r\n    },\r\n    timeStamp: {\r\n        alignItems: 'flex-end',\r\n        fontSize: 15,\r\n        color: '#494949',\r\n        letterSpacing: 0.15\r\n    },\r\n    centerLoading: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        position: 'absolute',\r\n        bottom: 10,\r\n        left: 10,\r\n        right: 10,\r\n        zIndex: 10\r\n    }\r\n})\r\n\r\nexport default withNavigation(NewsFeed);"]},"metadata":{},"sourceType":"script"}